### get_subtitles.py

1. Create a virtual environment with: `python -m venv venv`
2. Activate with: `venv\Scripts\Activate.ps1` / `source venv/bin/activate`
3. Install required packages with: `pip install -r requirements.txt`

```
usage: get_subtitles.py [-h] [--urls URLS [URLS ...]] [--cookies-path COOKIES_PATH] [--generate-missing] [--json-path JSON_PATH]
                        [--prefer-autogenerated] [--subs-path SUBS_PATH] [--whisper-batch-size WHISPER_BATCH_SIZE]
                        [--whisper-compute-type WHISPER_COMPUTE_TYPE] [--whisper-device WHISPER_DEVICE]
                        [--whisper-model WHISPER_MODEL]

Downloads/generates subtitles for a set of URLs in .lrc format using yt-dlp, WhisperX and ffmpeg. Requires ffmpeg to be installed
and available on path for subtitle format conversion. Requires cuBLAS and cuDNN for WhisperX GPU execution (see:
https://github.com/m-bain/whisperX#setup-%EF%B8%8F)

options:
  -h, --help            show this help message and exit
  --urls URLS [URLS ...]
                        List of URLs to obtain subtitles for. (default: ['https://youtube.com/playlist?list=PLLZVyAYonIO5Wlrf5-i8iXKmWYl6h0yx9',
                        'https://youtube.com/playlist?list=PLiwPsPm4ewgv5dPbkSRBzjJ4SjAOXXxZH', 'https://youtube.com/playlist?list=PL9wV0Fmo7N_g5X64TzZUY-eQyoZ4xvAf2'])
  --cookies-path COOKIES_PATH
                        Netscape formatted file to read cookies from, can be obtained with: yt-dlp --cookies-from-browser firefox --cookies cookies.txt (default: cookies.txt)
  --generate-missing    Generate subtitles for videos with no available subtitles. Only works if --prefer-existing is set. (default: True)
  --json-path JSON_PATH
                        Path to save JSON file to. (default: ../../assets/Subtitles.json)
  --prefer-existing     Prefer autogenerated subtitles over doing transcription. (default: False)
  --subs-path SUBS_PATH
                        Path to save files to. (default: ../../assets/subtitles)
  --whisper-batch-size WHISPER_BATCH_SIZE
                        Batch size to use for WhisperX transcription. Lower this if you run out of VRAM. (default: 8)
  --whisper-compute-type WHISPER_COMPUTE_TYPE
                        Compute type to use for WhisperX transcription (int8/float16/float32). (default: float16)
  --whisper-device WHISPER_DEVICE
                        Whether to perform transcription on GPU (CUDA) or CPU. (default: cuda)
  --whisper-model WHISPER_MODEL
                        Whisper model to use for transcription (see: https://github.com/openai/whisper#available-models-and-languages) (default: large-v3)
```

### write_subtitles_json.py

1. Create a virtual environment with: `python -m venv venv`
2. Activate with: `venv\Scripts\Activate.ps1` / `source venv/bin/activate`
3. Install required packages with: `pip install python-dateutil`

```
usage: write_subtitles_json.py [-h] [--json-path JSON_PATH] [--subs-path SUBS_PATH]

Writes subtitle info to a JSON file.

options:
  -h, --help            show this help message and exit
  --json-path JSON_PATH
                        Path to save JSON file to. (default: ../../assets/Subtitles.json)
  --subs-path SUBS_PATH
                        Path to subtitle files. (default: ../../assets/subtitles)
```

### detect_hallucinations.py

```
usage: detect_hallucinations.py [-h] [--directory DIRECTORY] [--json-path JSON_PATH] [--ignored-log IGNORED_LOG]
                                [--media-player-path MEDIA_PLAYER_PATH]

Detects Whisper hallucinations in a directory of .lrc files.

options:
  -h, --help            show this help message and exit
  --directory DIRECTORY
                        Directory containing .lrc files. (default: ../assets/subtitles)
  --json-path JSON_PATH
                        Path to JSON file containing subtitles information. (default: ../assets/Subtitles.json)
  --ignored-log IGNORED_LOG
                        File to log ignored hallucinations in. (default: ignored_hallucinations.txt)
  --media-player-path MEDIA_PLAYER_PATH
                        Path to media player executable. Needs to support passing file:/// URLs and --start-time argument. (default: C:/Program Files/VideoLAN/VLC/vlc.exe)
```

### update_stats.py

```
usage: update_stats.py [-h] [--readme-path README_PATH] [--json-path JSON_PATH]

options:
  -h, --help            show this help message and exit
  --readme-path README_PATH
                        Path to README. (default: ../../README.md)
  --json-path JSON_PATH
                        Path to Subtitles.json (default: ../assets/Subtitles.json)
```
